/* --- Nothing Font (Dot Matrix) - Refactored --- */

/* Core Principles:
  1. CSS Custom Properties (--variable) for a single source of truth.
  2. No `!important` needed due to a clean, component-based structure.
  3. `calc()` for dynamic and proportional sizing (e.g., row height depends on dot size).
  4. Modular size classes (.nothing-font--small) instead of styling h1/h2 tags directly.
*/

:root {
  /* Define theme colors for easy dark/light mode switching */
  --nothing-font-color: #000;
  --nothing-focus-color: #FF4B2B;
}

body.dark-mode {
  --nothing-font-color: #fff;
}

.nothing-font {
  /* --- Control Panel using CSS Variables --- */
  /* Scale based on viewport width for responsive sizing */
  --base-scale: 1vw;
  --dot-size: calc(var(--base-scale) * 0.4);
  --dot-margin: calc(var(--base-scale) * 0.1);
  --letter-spacing: calc(var(--base-scale) * 0.8);

  /* --- Base Component Styles --- */
  font-family: 'DotMatrix', monospace; /* Fallback font */
  position: relative;
  display: block;
  user-select: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color: var(--nothing-font-color);
  overflow: visible !important;
  max-width: 100%;
  width: 100%;
  min-height: calc(var(--dot-size) * 7 + var(--dot-margin) * 14);
  line-height: normal !important;
  height: auto !important;
  padding: 10px 0;
}

/* Hide original text but keep it for screen readers and SEO */
.nothing-font .original-text {
  position: absolute;
  width: 1px;
  height: 1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Base styles for the building blocks */
.dot-matrix {
  display: inline-block;
  vertical-align: top;
  contain: layout style paint; /* Performance optimization */
  min-height: calc(var(--dot-size) * 7 + var(--dot-margin) * 14);
  max-width: 100%;
  overflow: visible;
}

.letter {
  display: inline-block;
  vertical-align: top;
  margin-right: var(--letter-spacing);
}
.letter:last-child {
  margin-right: 0;
}

.dot-row {
  display: block;
  white-space: nowrap;
  margin: 0;
  padding: 0;
  /* Row height is calculated dynamically based on dot size and margin */
  height: calc(var(--dot-size) + (var(--dot-margin) * 2));
  line-height: calc(var(--dot-size) + (var(--dot-margin) * 2));
  overflow: visible;
}

.dot {
  display: inline-block;
  vertical-align: middle;
  background: currentColor;
  border-radius: 50%;
  opacity: 1;
  /* Sizing is now controlled by variables */
  width: var(--dot-size);
  height: var(--dot-size);
  margin: var(--dot-margin);
}

.dot.empty {
  background: transparent;
  animation: none;
  opacity: 0;
}

/* --- Size Modifier Classes --- */
/* To change the size, just apply one of these classes. */

.nothing-font--small {
  --base-scale: 0.5vw;
}

.nothing-font--medium { /* Default size */
  --base-scale: 1vw;
}

.nothing-font--large {
  --base-scale: 1.5vw;
}

.nothing-font--xl { /* For hero titles */
  --base-scale: 2vw;
}


/* --- Responsive Sizing --- */
/* Adjust base scale for different screen sizes */

@media (max-width: 768px) {
  .nothing-font {
    --base-scale: 1.2vw;
  }

  .nothing-font--large {
    --base-scale: 1.8vw;
  }

  .nothing-font--xl {
    --base-scale: 2.5vw;
  }
}

@media (max-width: 480px) {
  .nothing-font {
    --base-scale: 1.5vw;
  }

  .nothing-font--medium {
    --base-scale: 1.5vw;
  }

  .nothing-font--large {
    --base-scale: 2vw;
  }

  .nothing-font--xl {
    --base-scale: 3vw;
  }
}

@media (max-width: 360px) {
  .nothing-font {
    --base-scale: 2vw;
  }

  .nothing-font--medium {
    --base-scale: 2vw;
  }

  .nothing-font--large {
    --base-scale: 2.5vw;
  }

  .nothing-font--xl {
    --base-scale: 3.5vw;
  }
}


/* --- Hero Title Specific Styles --- */
/* Ensure hero titles wrap properly on all screen sizes */
.hero .title.nothing-font,
.hero-title.nothing-font {
  max-width: 100%;
  word-wrap: break-word;
  overflow-wrap: break-word;
  text-align: center;
  line-height: normal !important;
  overflow: visible !important;
  height: auto !important;
  min-height: fit-content !important;
}

.hero .title.nothing-font .dot-matrix,
.hero-title.nothing-font .dot-matrix {
  display: inline-block;
  max-width: 100%;
  overflow: visible !important;
  height: auto !important;
}

/* Responsive hero title adjustments */
@media (max-width: 768px) {
  .hero .title.nothing-font,
  .hero-title.nothing-font {
    --base-scale: 2vw;
  }
}

@media (max-width: 480px) {
  .hero .title.nothing-font,
  .hero-title.nothing-font {
    --base-scale: 2.5vw;
  }
}

@media (max-width: 360px) {
  .hero .title.nothing-font,
  .hero-title.nothing-font {
    --base-scale: 3vw;
  }
}

/* Loading state */
.nothing-font.loading .dot {
  opacity: 0.3;
}

.nothing-font.loaded .dot {
  opacity: 1;
}

/* Focus styles for keyboard navigation */
.nothing-font:focus {
  outline: 2px solid var(--nothing-focus-color);
  outline-offset: 4px;
  border-radius: 4px;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .dot {
    opacity: 1;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .nothing-font .dot {
    border: 1px solid currentColor;
  }
}

/* Override any parent styles that might clip the content */
h1.nothing-font,
h2.nothing-font,
h3.nothing-font,
.header h2.nothing-font {
  line-height: normal !important;
  overflow: visible !important;
  height: auto !important;
  min-height: fit-content !important;
  padding: 15px 0 !important;
}

/* Ensure left text headings display properly */
.left-text h3.nothing-font {
  line-height: normal !important;
  overflow: visible !important;
  height: auto !important;
  padding: 15px 0 !important;
}